<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Bandeau LED Interactif</title>
    <style>
        body, html { 
            margin: 0; padding: 0; background: #000; 
            height: 100vh; display: flex; align-items: center; overflow: hidden; 
        }

        .led-screen {
            position: relative;
            width: 100%;
            height: 300px;
            background: #0a0a0a;
            overflow: hidden;
            display: flex;
            align-items: center;
            border-top: 2px solid #333;
            border-bottom: 2px solid #333;
        }

        /* Effet de grille de pixels */
        .led-screen::after {
            content: "";
            position: absolute;
            inset: 0;
            background-image: radial-gradient(rgba(0,0,0,0.85) 45%, transparent 50%);
            background-size: 6px 6px;
            z-index: 10;
            pointer-events: none;
        }

        #bannerText {
            position: absolute;
            white-space: nowrap;
            font-family: 'Courier New', Courier, monospace;
            font-weight: 900;
            font-size: 180px;
            color: #ff0000;
            text-transform: uppercase;
            animation: scroll-left 10s linear infinite;
        }

        @keyframes scroll-left {
            0% { transform: translateX(100vw); }
            100% { transform: translateX(-100%); }
        }
    </style>
</head>
<body>

    <div class="led-screen">
        <div id="bannerText">CONNEXION...</div>
    </div>

    <script>
        const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbymWX7y0s86Lre4ukbgymbxJKOr4y0pQ-t2qkKNlGr1ChQlm5pZsvODmIeBTo-ERRaeSQ/exec';

        // Le Traducteur de Couleurs
        const traducteurCouleurs = {
            "blanc": "#FFFFFF",
            "jaune": "#FFFF00",
            "orange": "#FFA500",
            "rouge": "#FF0000",
            "vert": "#00FF00",
            "bleu": "#0000FF",
            "indigo": "#4B0082",
            "violet": "#EE82EE",
            "brun": "#8B4513",
            "noir": "#000000"
        };

        async function updateBanner() {
            try {
                const response = await fetch(`${SCRIPT_URL}?t=${Date.now()}`);
                const data = await response.json();
                
                console.log("Données reçues :", data);

                const el = document.getElementById('bannerText');

                // 1. Mise à jour du texte
                el.innerText = data.text || "PAS DE TEXTE";

                // 2. Traduction de la couleur (Français -> CSS)
                let couleurFr = (data.color || "rouge").toLowerCase().trim();
                let couleurCSS = traducteurCouleurs[couleurFr] || couleurFr; // Utilise le code si trouvé, sinon garde la valeur brute
                el.style.color = couleurCSS;
                el.style.textShadow = `0 0 15px ${couleurCSS}`;

                // 3. Mise à jour de la taille
                el.style.fontSize = (data.size || 180) + "px";
                
                // 4. Mise à jour de l'animation
                const speed = data.speed || 10;
                const direction = (data.direction && data.direction.toLowerCase() === 'droite') ? 'reverse' : 'normal';
                
                el.style.animation = 'none'; // Stop l'animation
                el.offsetHeight; // Forcer le recalcul (fixe le bug du texte qui disparaît)
                el.style.animation = `scroll-left ${speed}s linear infinite ${direction}`;

            } catch (error) {
                console.error("Erreur de mise à jour :", error);
            }
        }

        // Rafraîchir toutes les 15 secondes
        setInterval(updateBanner, 15000);
        updateBanner();
    </script>
</body>
</html>




